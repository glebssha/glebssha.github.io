(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{10:function(e,t,n){e.exports={imgWrapper:"BgImage_imgWrapper__1OV0I",loading:"BgImage_loading__2m8tD",openWindow:"BgImage_openWindow__1Ebb7",open:"BgImage_open__1mC42",location:"BgImage_location__3TR05",locationEl:"BgImage_locationEl__3JKNl",locationIcon:"BgImage_locationIcon__11Kgi",locationList:"BgImage_locationList__1N_dS"}},12:function(e,t,n){e.exports={link:"NavbarLink_link__3qDTY",inlineLink:"NavbarLink_inlineLink__YCK3N"}},15:function(e,t,n){e.exports={center:"About_center__1LNMC",home:"About_home__vqkn4"}},17:function(e,t,n){e.exports={formWrapper:"Upload_formWrapper__-Ps20"}},19:function(e,t,n){e.exports={headerMain:"Header_headerMain__9BmVs",title:"Header_title__26H2S"}},21:function(e,t,n){e.exports={profileWrapper:"ProfileLink_profileWrapper__22S7_",profileUsername:"ProfileLink_profileUsername__1xC9k"}},31:function(e,t,n){e.exports={footerMain:"Footer_footerMain__evZ6Z"}},32:function(e,t,n){e.exports={navbarList:"Navbar_navbarList__1HG7g"}},35:function(e,t,n){e.exports={loginWrapper:"Login_loginWrapper__1wOIs"}},4:function(e,t,n){e.exports={row:"Inputs_row__1wahU",form:"Inputs_form__2rm2S",submitButton:"Inputs_submitButton__1qtaa",fileInput:"Inputs_fileInput__3Z1n3",fileInputLabel:"Inputs_fileInputLabel__1lYnD",loading:"Inputs_loading__3f_t5",rotate:"Inputs_rotate__3JoSF",err:"Inputs_err__1Bgkm",success:"Inputs_success__1sRJE",loadingButton:"Inputs_loadingButton__2SdNK",active:"Inputs_active__1W7iI"}},40:function(e,t,n){},41:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(30),s=n.n(r),i=(n(40),n(41),n(2)),o=n(9),l=n.n(o),j=n(11),u=n(3),d=n(10),b=n.n(d);function O(e){return _.apply(this,arguments)}function _(){return(_=Object(j.a)(l.a.mark((function e(t){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",n=t?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BACKEND_HOST,"/api/random/not/").concat(t):"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BACKEND_HOST,"/api/random/"),e.next=4,fetch(n);case 4:return c=e.sent,e.abrupt("return",c.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var p=n(0);function h(e){var t=e.hide,n=e.children,a=Object(c.useState)(""),r=Object(u.a)(a,2),s=r[0],i=r[1],o=Object(c.useState)([]),d=Object(u.a)(o,2),_=d[0],h=d[1],m=Object(c.useState)(!0),x=Object(u.a)(m,2),f=x[0],v=x[1],g=function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,O();case 3:t=e.sent,console.log(t),t.image===s&&v(!1),i(t.image),h(t.location);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){g()}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("img",{alt:"",onLoad:function(){v(!1)},className:"".concat(b.a.imgWrapper," ").concat(f?b.a.loading:""),src:s}),!t&&Object(p.jsx)("div",{className:b.a.openWindow,children:Object(p.jsx)("a",{children:Object(p.jsx)("h1",{onClick:g,className:b.a.open,children:" Open a new window "})})}),n,Object(p.jsxs)("div",{className:b.a.location,children:[Object(p.jsx)("img",{className:b.a.locationIcon,src:"/location_icon.png",alt:"me",width:"39",height:"26"}),Object(p.jsx)("div",{className:b.a.locationList,children:_.map((function(e){return Object(p.jsxs)("div",{className:b.a.locationEl,children:[" ",e," "]},e)}))})]})]})}function m(){return Object(p.jsx)("div",{children:Object(p.jsx)(h,{hide:!1})})}var x=n(15),f=n.n(x);function v(){return Object(p.jsx)("div",{children:Object(p.jsx)(h,{hide:!0,children:Object(p.jsxs)("div",{className:f.a.center,children:[Object(p.jsx)("p",{children:"What is Windows of Wonder?"}),Object(p.jsx)("p",{children:"Windows of Wonder is an online community where people around the world share the views from their windows to help someone else relax, focus, meditate or take a vacation without having to move."}),Object(p.jsx)("p",{children:"Through it, we can look through someone else's eyes and fill that deep hole in our wanderlust hearts."})]})})})}var g=n(31),S=n.n(g),N=n(32),w=n.n(N),C=n(12),E=n.n(C),T=n(7);function I(e){var t=e.text,n=e.href;return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("div",{className:E.a.link,children:Object(p.jsx)(T.b,{to:n,children:t})})})}function W(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("ul",{className:w.a.navbarList,children:[Object(p.jsx)(I,{text:"About",href:"/about"}),Object(p.jsx)(I,{text:"Contact Us",href:"/contact"}),Object(p.jsx)(I,{text:"Submit",href:"/upload"})]})})}function k(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("div",{className:S.a.footerMain,children:Object(p.jsx)(W,{})})})}var L=n(19),P=n.n(L),A=n(8),B=n.n(A),F=n(33),y=n(34),D=n(20),U=n.n(D),H="".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BACKEND_HOST,"/api/auth/"),R=new(function(){function e(){Object(F.a)(this,e)}return Object(y.a)(e,[{key:"login",value:function(e,t){return U.a.post(H+"sign_in",{username:e,password:t}).then((function(e){return e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))}},{key:"logout",value:function(){localStorage.removeItem("user")}},{key:"register",value:function(e,t,n){return U.a.post(H+"sign_up",{username:e,email:t,password:n})}},{key:"getCurrentUser",value:function(){return JSON.parse(localStorage.getItem("user"))}}]),e}());function K(){var e=Object(c.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],r=R.getCurrentUser();return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"".concat(B.a.menu," ").concat(n?B.a.active:""),onClick:function(){a(!n)},children:[Object(p.jsxs)("div",{className:B.a.menuOpener,children:[Object(p.jsx)("div",{className:"".concat(B.a.dot," ").concat(B.a.first)}),Object(p.jsx)("div",{className:"".concat(B.a.dot," ").concat(B.a.second)}),Object(p.jsx)("div",{className:"".concat(B.a.dot," ").concat(B.a.third)}),Object(p.jsx)("div",{className:"".concat(B.a.dot," ").concat(B.a.fourth)})]}),Object(p.jsxs)("ul",{children:[Object(p.jsx)(I,{text:"Upload",href:"/upload"}),Object(p.jsx)(I,{text:"About",href:"/about"}),r&&Object(p.jsx)(I,{text:"Logout",href:"/logout"})]})]})})}var M=n(21),J=n.n(M);function q(){var e,t=R.getCurrentUser().username;return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:J.a.profileWrapper,children:[Object(p.jsxs)("div",{className:J.a.profileUsername,children:["Hello, ",(e=t,e&&e[0].toUpperCase()+e.slice(1))]}),Object(p.jsx)("img",{src:"profile_icon.png"})]})})}function V(){var e=R.getCurrentUser();return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:P.a.headerMain,children:[Object(p.jsx)(K,{}),Object(p.jsx)("h1",{className:P.a.title,children:Object(p.jsx)(T.b,{to:"/",children:"Windows of Wonder"})}),e&&Object(p.jsx)(q,{})]})})}function Y(){return Object(p.jsx)("div",{children:Object(p.jsx)(h,{hide:!0,children:Object(p.jsxs)("div",{className:f.a.center,children:[Object(p.jsx)("p",{children:"Whoops! Seems like we're still working on this one..."}),Object(p.jsxs)("p",{children:["You can see some awesome Wonder Windows on our ",Object(p.jsx)("div",{className:"".concat(E.a.link," ").concat(E.a.inlineLink),children:Object(p.jsx)(T.b,{to:"/image",children:"home page"})}),"though "]})]})})})}function Z(){return Object(p.jsx)("div",{children:Object(p.jsx)(h,{hide:!1})})}var G=n(17),X=n.n(G),z=n(4),Q=n.n(z);function $(){var e=Object(c.useState)(),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(u.a)(r,2),i=s[0],o=s[1],d=Object(c.useState)(""),b=Object(u.a)(d,2),O=b[0],_=b[1],m=Object(c.useState)(""),x=Object(u.a)(m,2),f=x[0],v=x[1],g=Object(c.useState)(!1),S=Object(u.a)(g,2),N=S[0],w=S[1],C=Object(c.useState)(""),E=Object(u.a)(C,2),T=E[0],I=E[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(h,{hide:!0}),Object(p.jsx)("div",{className:X.a.formWrapper,children:Object(p.jsxs)("div",{className:Q.a.form,children:[Object(p.jsxs)("div",{className:Q.a.row,children:[Object(p.jsx)("label",{htmlFor:"file-upload",className:Q.a.fileInputLabel,children:"Click here to choose a file!"}),Object(p.jsx)("input",{type:"file",required:!0,className:Q.a.fileInput,id:"file-upload",name:"file",onChange:function(e){a(e.target.files[0])}})]}),Object(p.jsx)("div",{className:Q.a.row,children:Object(p.jsx)("input",{type:"text",required:!0,placeholder:"City",name:"city",value:i,onChange:function(e){return o(e.target.value)}})}),Object(p.jsx)("div",{className:Q.a.row,children:Object(p.jsx)("input",{type:"text",required:!0,placeholder:"Country",name:"country",value:T,onChange:function(e){return I(e.target.value)}})}),Object(p.jsx)("div",{className:Q.a.row,children:Object(p.jsxs)("div",{className:"".concat(Q.a.loadingButton," ").concat(N?Q.a.active:""),children:[Object(p.jsx)("button",{className:Q.a.submitButton,onClick:function(){var e=new FormData;e.append("file",n),e.append("city",i),e.append("country",T),w(!0),fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BACKEND_HOST,"/api/auth/sign_in"),{method:"POST",body:e}).then(function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,500)}));case 2:w(!1),t.ok?(_(""),v("Upload ok!")):(v(""),_("Form error"));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Submit"}),Object(p.jsx)("div",{className:Q.a.loading})]})}),Object(p.jsxs)("div",{className:Q.a.row,children:[Object(p.jsx)("div",{className:X.a.err,children:O}),Object(p.jsx)("div",{className:X.a.success,children:f})]})]})})]})}var ee=n(35),te=n.n(ee);function ne(){var e=Object(i.h)(),t=Object(c.useState)(""),n=Object(u.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(""),o=Object(u.a)(s,2),l=o[0],j=o[1],d=Object(c.useState)(""),b=Object(u.a)(d,2),O=b[0],_=b[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(h,{hide:!0}),Object(p.jsx)("div",{className:te.a.loginWrapper,children:Object(p.jsx)("form",{onSubmit:function(t){t.preventDefault(),R.login(a,l).then((function(t){_(""),e("/",{replace:!1}),window.location.reload()}),(function(e){_("Authentication error")}))},children:Object(p.jsxs)("div",{className:Q.a.form,children:[Object(p.jsx)("div",{className:Q.a.row,children:Object(p.jsx)("input",{type:"text",placeholder:"Login",name:"login",value:a,onChange:function(e){return r(e.target.value)}})}),Object(p.jsx)("div",{className:Q.a.row,children:Object(p.jsx)("input",{type:"password",placeholder:"Password",name:"password",value:l,onChange:function(e){return j(e.target.value)}})}),Object(p.jsx)("div",{className:Q.a.row,children:Object(p.jsxs)("div",{className:Q.a.loadingButton,children:[Object(p.jsx)("button",{className:Q.a.submitButton,children:"Login"}),Object(p.jsx)("div",{className:Q.a.loading})]})}),Object(p.jsx)("div",{className:Q.a.err,children:O})]})})})]})}function ce(){return R.getCurrentUser()&&(R.logout(),window.location.reload()),Object(p.jsx)(i.a,{to:"/"})}var ae=function(){return R.getCurrentUser()?Object(p.jsx)(i.b,{}):Object(p.jsx)(i.a,{to:"/login"})};var re=function(){return R.getCurrentUser(),Object(p.jsxs)("div",{className:"App",children:[Object(p.jsxs)(i.e,{children:[Object(p.jsx)(i.c,{path:"/",element:Object(p.jsx)(m,{})}),Object(p.jsx)(i.c,{path:"/image",element:Object(p.jsx)(Z,{})}),Object(p.jsx)(i.c,{path:"/about",element:Object(p.jsx)(v,{})}),Object(p.jsx)(i.c,{path:"/upload",element:Object(p.jsx)(ae,{}),children:Object(p.jsx)(i.c,{path:"/upload",element:Object(p.jsx)($,{})})}),Object(p.jsx)(i.c,{path:"/login",element:Object(p.jsx)(ne,{})}),Object(p.jsx)(i.c,{path:"/logout",element:Object(p.jsx)(ce,{})}),Object(p.jsx)(i.c,{path:"*",element:Object(p.jsx)(Y,{})})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)(V,{}),Object(p.jsx)(k,{})]})]})},se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,63)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};s.a.render(Object(p.jsx)(T.a,{children:Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(re,{})})}),document.getElementById("root")),se()},8:function(e,t,n){e.exports={menuOpener:"Menu_menuOpener__17SxI",dot:"Menu_dot__2oE3e",menu:"Menu_menu__3ih6r",active:"Menu_active__6vljC",first:"Menu_first__24aHv",second:"Menu_second__XoNdE",third:"Menu_third__hpFMh",fourth:"Menu_fourth__AAP6w"}}},[[62,1,2]]]);
//# sourceMappingURL=main.22847a16.chunk.js.map