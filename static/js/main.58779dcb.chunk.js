(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{10:function(e,t,n){e.exports={imgWrapper:"BgImage_imgWrapper__1OV0I",loading:"BgImage_loading__2m8tD",openWindow:"BgImage_openWindow__1Ebb7",open:"BgImage_open__1mC42",location:"BgImage_location__3TR05",locationEl:"BgImage_locationEl__3JKNl",locationIcon:"BgImage_locationIcon__11Kgi",locationList:"BgImage_locationList__1N_dS"}},12:function(e,t,n){e.exports={link:"NavbarLink_link__3qDTY",inlineLink:"NavbarLink_inlineLink__YCK3N"}},15:function(e,t,n){e.exports={center:"About_center__1LNMC",home:"About_home__vqkn4"}},17:function(e,t,n){e.exports={formWrapper:"Upload_formWrapper__-Ps20"}},19:function(e,t,n){e.exports={headerMain:"Header_headerMain__9BmVs",title:"Header_title__26H2S"}},21:function(e,t,n){e.exports={profileWrapper:"ProfileLink_profileWrapper__22S7_",profileUsername:"ProfileLink_profileUsername__1xC9k"}},31:function(e,t,n){e.exports={footerMain:"Footer_footerMain__evZ6Z"}},32:function(e,t,n){e.exports={navbarList:"Navbar_navbarList__1HG7g"}},35:function(e,t,n){e.exports={loginWrapper:"Login_loginWrapper__1wOIs"}},4:function(e,t,n){e.exports={row:"Inputs_row__1wahU",form:"Inputs_form__2rm2S",submitButton:"Inputs_submitButton__1qtaa",fileInput:"Inputs_fileInput__3Z1n3",fileInputLabel:"Inputs_fileInputLabel__1lYnD",loading:"Inputs_loading__3f_t5",rotate:"Inputs_rotate__3JoSF",err:"Inputs_err__1Bgkm",success:"Inputs_success__1sRJE",loadingButton:"Inputs_loadingButton__2SdNK",active:"Inputs_active__1W7iI"}},40:function(e,t,n){},41:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(30),s=n.n(r),o=(n(40),n(41),n(2)),i=n(9),l=n.n(i),j=n(11),u=n(3),d=n(10),b=n.n(d);function h(e){return p.apply(this,arguments)}function p(){return(p=Object(j.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",n=t?"".concat("https://wonderwindows.xyz","/api/random/not/").concat(t):"".concat("https://wonderwindows.xyz","/api/random/"),console.log(n),e.next=5,fetch(n);case 5:return a=e.sent,e.abrupt("return",a.json());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=n(0);function m(e){var t=e.hide,n=e.children,c=Object(a.useState)(""),r=Object(u.a)(c,2),s=r[0],o=r[1],i=Object(a.useState)([]),d=Object(u.a)(i,2),p=d[0],m=d[1],x=Object(a.useState)(!0),f=Object(u.a)(x,2),_=f[0],g=f[1],v=function(){var e=Object(j.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,h();case 3:t=e.sent,console.log(t),t.image===s&&g(!1),n="".concat("https://wonderwindows.xyz","/api/image/").concat(t.url),o(n),console.log(n),m(t.location);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){v()}),[]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("img",{alt:"",onLoad:function(){g(!1)},className:"".concat(b.a.imgWrapper," ").concat(_?b.a.loading:""),src:s}),!t&&Object(O.jsx)("div",{className:b.a.openWindow,children:Object(O.jsx)("a",{children:Object(O.jsx)("h1",{onClick:v,className:b.a.open,children:" Open a new window "})})}),n,Object(O.jsxs)("div",{className:b.a.location,children:[Object(O.jsx)("img",{className:b.a.locationIcon,src:"/location_icon.png",alt:"me",width:"39",height:"26"}),Object(O.jsx)("div",{className:b.a.locationList,children:p.map((function(e){return Object(O.jsxs)("div",{className:b.a.locationEl,children:[" ",e," "]},e)}))})]})]})}function x(){return Object(O.jsx)("div",{children:Object(O.jsx)(m,{hide:!1})})}var f=n(15),_=n.n(f);function g(){return Object(O.jsx)("div",{children:Object(O.jsx)(m,{hide:!0,children:Object(O.jsxs)("div",{className:_.a.center,children:[Object(O.jsx)("p",{children:"What is Windows of Wonder?"}),Object(O.jsx)("p",{children:"Windows of Wonder is an online community where people around the world share the views from their windows to help someone else relax, focus, meditate or take a vacation without having to move."}),Object(O.jsx)("p",{children:"Through it, we can look through someone else's eyes and fill that deep hole in our wanderlust hearts."})]})})})}var v=n(31),w=n.n(v),N=n(32),I=n.n(N),k=n(12),S=n.n(k),y=n(7);function C(e){var t=e.text,n=e.href;return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("div",{className:S.a.link,children:Object(O.jsx)(y.b,{to:n,children:t})})})}function W(){return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("ul",{className:I.a.navbarList,children:[Object(O.jsx)(C,{text:"About",href:"/about"}),Object(O.jsx)(C,{text:"Contact Us",href:"/contact"}),Object(O.jsx)(C,{text:"Submit",href:"/upload"})]})})}function L(){return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("div",{className:w.a.footerMain,children:Object(O.jsx)(W,{})})})}var B=n(19),F=n.n(B),M=n(8),U=n.n(M),E=n(33),P=n(34),A=n(20),T=n.n(A),J="".concat("https://wonderwindows.xyz","/api/auth/"),q=new(function(){function e(){Object(E.a)(this,e)}return Object(P.a)(e,[{key:"login",value:function(e,t){return T.a.post(J+"sign_in",{username:e,password:t}).then((function(e){return e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))}},{key:"logout",value:function(){localStorage.removeItem("user")}},{key:"register",value:function(e,t,n){return T.a.post(J+"sign_up",{username:e,email:t,password:n})}},{key:"getCurrentUser",value:function(){return JSON.parse(localStorage.getItem("user"))}}]),e}());function D(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],c=t[1],r=q.getCurrentUser();return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"".concat(U.a.menu," ").concat(n?U.a.active:""),onClick:function(){c(!n)},children:[Object(O.jsxs)("div",{className:U.a.menuOpener,children:[Object(O.jsx)("div",{className:"".concat(U.a.dot," ").concat(U.a.first)}),Object(O.jsx)("div",{className:"".concat(U.a.dot," ").concat(U.a.second)}),Object(O.jsx)("div",{className:"".concat(U.a.dot," ").concat(U.a.third)}),Object(O.jsx)("div",{className:"".concat(U.a.dot," ").concat(U.a.fourth)})]}),Object(O.jsxs)("ul",{children:[Object(O.jsx)(C,{text:"Upload",href:"/upload"}),Object(O.jsx)(C,{text:"About",href:"/about"}),r&&Object(O.jsx)(C,{text:"Logout",href:"/logout"})]})]})})}var H=n(21),z=n.n(H);function K(){var e,t=q.getCurrentUser().username;return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:z.a.profileWrapper,children:[Object(O.jsxs)("div",{className:z.a.profileUsername,children:["Hello, ",(e=t,e&&e[0].toUpperCase()+e.slice(1))]}),Object(O.jsx)("img",{src:"profile_icon.png"})]})})}function Y(){var e=q.getCurrentUser();return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:F.a.headerMain,children:[Object(O.jsx)(D,{}),Object(O.jsx)("h1",{className:F.a.title,children:Object(O.jsx)(y.b,{to:"/",children:"Windows of Wonder"})}),e&&Object(O.jsx)(K,{})]})})}function Z(){return Object(O.jsx)("div",{children:Object(O.jsx)(m,{hide:!0,children:Object(O.jsxs)("div",{className:_.a.center,children:[Object(O.jsx)("p",{children:"Whoops! Seems like we're still working on this one..."}),Object(O.jsxs)("p",{children:["You can see some awesome Wonder Windows on our ",Object(O.jsx)("div",{className:"".concat(S.a.link," ").concat(S.a.inlineLink),children:Object(O.jsx)(y.b,{to:"/image",children:"home page"})}),"though "]})]})})})}function R(){return Object(O.jsx)("div",{children:Object(O.jsx)(m,{hide:!1})})}var V=n(17),G=n.n(V),X=n(4),Q=n.n(X);function $(){var e=Object(a.useState)(),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(u.a)(r,2),o=s[0],i=s[1],d=Object(a.useState)(""),b=Object(u.a)(d,2),h=b[0],p=b[1],x=Object(a.useState)(""),f=Object(u.a)(x,2),_=f[0],g=f[1],v=Object(a.useState)(!1),w=Object(u.a)(v,2),N=w[0],I=w[1],k=Object(a.useState)(""),S=Object(u.a)(k,2),y=S[0],C=S[1];return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(m,{hide:!0}),Object(O.jsx)("div",{className:G.a.formWrapper,children:Object(O.jsxs)("div",{className:Q.a.form,children:[Object(O.jsxs)("div",{className:Q.a.row,children:[Object(O.jsx)("label",{htmlFor:"file-upload",className:Q.a.fileInputLabel,children:"Click here to choose a file!"}),Object(O.jsx)("input",{type:"file",required:!0,className:Q.a.fileInput,id:"file-upload",name:"file",onChange:function(e){c(e.target.files[0])}})]}),Object(O.jsx)("div",{className:Q.a.row,children:Object(O.jsx)("input",{type:"text",required:!0,placeholder:"City",name:"city",value:o,onChange:function(e){return i(e.target.value)}})}),Object(O.jsx)("div",{className:Q.a.row,children:Object(O.jsx)("input",{type:"text",required:!0,placeholder:"Country",name:"country",value:y,onChange:function(e){return C(e.target.value)}})}),Object(O.jsx)("div",{className:Q.a.row,children:Object(O.jsxs)("div",{className:"".concat(Q.a.loadingButton," ").concat(N?Q.a.active:""),children:[Object(O.jsx)("button",{className:Q.a.submitButton,onClick:function(){var e=new FormData;e.append("file",n),e.append("city",o),e.append("country",y),I(!0),fetch("".concat("https://wonderwindows.xyz","/api/auth/sign_in"),{method:"POST",body:e}).then(function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,500)}));case 2:I(!1),t.ok?(p(""),g("Upload ok!")):(g(""),p("Form error"));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Submit"}),Object(O.jsx)("div",{className:Q.a.loading})]})}),Object(O.jsxs)("div",{className:Q.a.row,children:[Object(O.jsx)("div",{className:G.a.err,children:h}),Object(O.jsx)("div",{className:G.a.success,children:_})]})]})})]})}var ee=n(35),te=n.n(ee);function ne(){var e=Object(o.h)(),t=Object(a.useState)(""),n=Object(u.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(""),i=Object(u.a)(s,2),l=i[0],j=i[1],d=Object(a.useState)(""),b=Object(u.a)(d,2),h=b[0],p=b[1];return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(m,{hide:!0}),Object(O.jsx)("div",{className:te.a.loginWrapper,children:Object(O.jsx)("form",{onSubmit:function(t){t.preventDefault(),q.login(c,l).then((function(t){p(""),e("/",{replace:!1}),window.location.reload()}),(function(e){p("Authentication error")}))},children:Object(O.jsxs)("div",{className:Q.a.form,children:[Object(O.jsx)("div",{className:Q.a.row,children:Object(O.jsx)("input",{type:"text",placeholder:"Login",name:"login",value:c,onChange:function(e){return r(e.target.value)}})}),Object(O.jsx)("div",{className:Q.a.row,children:Object(O.jsx)("input",{type:"password",placeholder:"Password",name:"password",value:l,onChange:function(e){return j(e.target.value)}})}),Object(O.jsx)("div",{className:Q.a.row,children:Object(O.jsxs)("div",{className:Q.a.loadingButton,children:[Object(O.jsx)("button",{className:Q.a.submitButton,children:"Login"}),Object(O.jsx)("div",{className:Q.a.loading})]})}),Object(O.jsx)("div",{className:Q.a.err,children:h})]})})})]})}function ae(){return q.getCurrentUser()&&(q.logout(),window.location.reload()),Object(O.jsx)(o.a,{to:"/"})}var ce=function(){return q.getCurrentUser()?Object(O.jsx)(o.b,{}):Object(O.jsx)(o.a,{to:"/login"})};var re=function(){return q.getCurrentUser(),Object(O.jsxs)("div",{className:"App",children:[Object(O.jsxs)(o.e,{children:[Object(O.jsx)(o.c,{path:"/",element:Object(O.jsx)(x,{})}),Object(O.jsx)(o.c,{path:"/image",element:Object(O.jsx)(R,{})}),Object(O.jsx)(o.c,{path:"/about",element:Object(O.jsx)(g,{})}),Object(O.jsx)(o.c,{path:"/upload",element:Object(O.jsx)(ce,{}),children:Object(O.jsx)(o.c,{path:"/upload",element:Object(O.jsx)($,{})})}),Object(O.jsx)(o.c,{path:"/login",element:Object(O.jsx)(ne,{})}),Object(O.jsx)(o.c,{path:"/logout",element:Object(O.jsx)(ae,{})}),Object(O.jsx)(o.c,{path:"*",element:Object(O.jsx)(Z,{})})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)(Y,{}),Object(O.jsx)(L,{})]})]})},se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,63)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(O.jsx)(y.a,{children:Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(re,{})})}),document.getElementById("root")),se()},8:function(e,t,n){e.exports={menuOpener:"Menu_menuOpener__17SxI",dot:"Menu_dot__2oE3e",menu:"Menu_menu__3ih6r",active:"Menu_active__6vljC",first:"Menu_first__24aHv",second:"Menu_second__XoNdE",third:"Menu_third__hpFMh",fourth:"Menu_fourth__AAP6w"}}},[[62,1,2]]]);
//# sourceMappingURL=main.58779dcb.chunk.js.map